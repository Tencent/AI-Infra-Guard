<?xml version="1.0" encoding="UTF-8"?>
<tools>
<tool name="edit">
  <description>
    Edit a file by replacing text content. This tool performs string replacement operations.
    
    IMPORTANT RULES:
    - The old_string must uniquely identify the content to replace (unless using replace_all)
    - Include enough context (3-5 lines before and after) to ensure unique matching
    - If multiple matches are found, the operation will fail (use replace_all or add more context)
    - To create a new file or overwrite completely, use empty old_string
    
    The tool uses intelligent matching strategies:
    - Exact string matching
    - Line-trimmed matching (ignores leading/trailing whitespace per line)
    - Block anchor matching (uses first and last lines as anchors)
    - Whitespace-normalized matching
  </description>
  <parameters>
    <parameter name="file_path" type="string" required="true">
      The path to the file to modify (absolute or relative to project root)
    </parameter>
    <parameter name="old_string" type="string" required="true">
      The text to replace. Must match exactly or uniquely after normalization.
      Use empty string to create a new file or overwrite existing content.
    </parameter>
    <parameter name="new_string" type="string" required="true">
      The replacement text. Must be different from old_string.
    </parameter>
    <parameter name="replace_all" type="boolean" required="false">
      Replace all occurrences of old_string. Default is false.
      When false, old_string must match exactly one location.
    </parameter>
  </parameters>
  <returns>
    <field name="success" type="boolean">Whether the edit was successful</field>
    <field name="title" type="string">Filename that was edited</field>
    <field name="diff" type="string">Unified diff showing the changes</field>
    <field name="additions" type="number">Number of lines added</field>
    <field name="deletions" type="number">Number of lines removed</field>
    <field name="error" type="string">Error message if failed</field>
  </returns>
</tool>
</tools>

